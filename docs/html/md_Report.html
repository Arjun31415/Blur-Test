<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fast Gaussian Blur: Report</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Fast Gaussian Blur<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Testing out Gaussian blur on CPU and GPU</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Report </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Abstract</h1>
<p>Gaussian Blurring has numerous applications in various fields, including gaming, photography, video processing, and medical imaging, to name a few. Here are some examples of how Gaussian Blurring is used in different areas:</p>
<p>Gaming: Gaussian Blurring is used in gaming to create realistic depth-of-field effects, which can simulate the way our eyes focus on objects in the real world. For example, in a first-person shooter game, blurring the background can make the player feel like they are focusing on a distant object. Another example is motion blur, which can simulate the way objects appear blurry when they are moving quickly.</p>
<p>Photography: Gaussian Blurring is commonly used in photography to remove noise from images and to create soft-focus effects. It can also be used to smooth out skin tones in portraits and to create a bokeh effect, where the background of an image appears out of focus.</p>
<p>Video processing: Gaussian Blurring is used in video processing to remove noise and to smooth out video frames. It is also used to create special effects, such as blurring out a face in a video to protect someone's identity.</p>
<p>Medical imaging: Gaussian Blurring is used in medical imaging to remove noise from images and to enhance the contrast between different structures in the image. For example, it can be used to enhance the edges of a tumor in a CT scan or MRI image.</p>
<p>However the time complexity <picture><source srcset="form_1_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$(O(nmk^2))$" src="form_1.png" width="59" height="15"/></picture> of a naive implementation of Gaussian Blurring can be quite high, which can result in slow performance. This is because the process of blurring an image involves convolving the image with a Gaussian kernel, which requires performing a large number of calculations for each pixel in the image. Furthermore, the naive implementation requires applying the kernel to each pixel in the image, which can result in redundant calculations. This can lead to further slow-downs in performance, especially for larger images.</p>
<p>This project compares Gaussian Blurring implemented in both CPU and GPU architectures, and demonstrates the speed benefits of a separable 1D kernel versus a 2D kernel. Time complexity and performance measurements are used to analyse the differences between the two kernels on both the CPU and the GPU. Results show that a separable 1D kernel is faster than a 2D, and this proves that the speed benefits associated with a separable 1D kernel in image processing tasks extend across different hardware implementations.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Dataset</h1>
<p>This project uses the standard dataset for image proessing, sourced from <a href="https://github.com/mohammadimtiazz/standard-test-images-for-Image-Processing">here</a>. The dataset consists of 24 images, which include grayscale, 256 bit color and 512 bit color of each unique image.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Technologies Used -</h1>
<ol type="1">
<li>OpenCV - For reading and writing images</li>
<li>OpenMP - For parallelizing the CPU implementation</li>
<li>CUDA - For parallelizing the GPU implementation</li>
</ol>
<h1><a class="anchor" id="autotoc_md4"></a>
Methodology</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
CPU -</h2>
<ol type="1">
<li>The 2D kernel is first generated and then applied onto the image as a convolution.</li>
<li>For parallelizing the CPU implementation, OpenMP <code>#pragma parallel for</code> compiler directive is used along with shared data to speed up. The separable kernel was not implemented for the CPU because, regardless of the implementation, the process is very slow as compared to GPU</li>
</ol>
<h2><a class="anchor" id="autotoc_md6"></a>
GPU -</h2>
<h3><a class="anchor" id="autotoc_md7"></a>
2D Kernel -</h3>
<ol type="1">
<li>First the kernel is generated on the host (CPU).</li>
<li>Then the image is loaded on the host.</li>
<li>The image is then copied to the device (GPU) using OpenCV API.</li>
<li>The kernel is copied to the device using <code>cudaMemcpy()</code>.</li>
<li>An output image is created on the GPU with the help of OpenCV API.</li>
<li>The blocks and grids are created, and the Convolution kernel is called with the required parameters.</li>
<li>Synchronization of GPU threads takes place to ensure no race conditions during stress testing.</li>
<li>The output image is copied back to the host (CPU) using OpenCV API.</li>
<li>The GPU memory is freed using <code>cudaFree()</code> and the images are freed using OpenCV API.</li>
</ol>
<h3><a class="anchor" id="autotoc_md8"></a>
Separable Kernel (1D) -</h3>
<ol type="1">
<li>First a 1D kernel is generated on the host (CPU).</li>
<li>The image is loaded on the host and then uploaded to the device (GPU).</li>
<li>an outpuit image is created on the GPU with the help of OpenCV API.</li>
<li>first a convolution is applied along the horizontal axis (x-axis) on the original image. This output is stored in a temporary image.</li>
<li>Now a convolution is applied along the vertical axis (y-axis) on the temporary image. This output is stored in the final output image.</li>
<li>The final output image is downloaded to the host.</li>
<li>The GPU memory is freed using <code>cudaFree()</code> and the images are freed using OpenCV API.</li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Results -</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Plots -</h2>
<h3><a class="anchor" id="autotoc_md11"></a>
CPU -</h3>
<div class="image">
<img src="gaussian_blur_cpu_single_threaded.png" alt=""/>
<div class="caption">
Gaussian Blur CPU Single Threaded</div></div>
    <div class="image">
<img src="gaussian_blur_cpu_multi_threaded.png" alt=""/>
<div class="caption">
Gaussian Blur CPU Multiple Threaded</div></div>
    <p><b>Comparing Single Threaded vs Multi Threaded</b></p>
<div class="image">
<img src="gaussian_blur_cpu_comparison.png" alt=""/>
<div class="caption">
Gaussian Blur CPU Comparison</div></div>
    <p>Average Speedup: 7.31 times</p>
<h3><a class="anchor" id="autotoc_md12"></a>
GPU -</h3>
<div class="image">
<img src="gaussian_blur_2d.png" alt=""/>
<div class="caption">
Gaussian Blur 2D kernel</div></div>
    <p><b>Separable Kernel</b> - <img src="gaussian_blur_x.png" alt="" class="inline" title="Gaussian Blur Separable Kernel Horizontal"/>    </p>
<div class="image">
<img src="gaussian_blur_y.png" alt=""/>
<div class="caption">
Gaussian Blur Separable Kernel Vertical</div></div>
    <div class="image">
<img src="gaussian_blur_x_y.png" alt=""/>
<div class="caption">
Gaussian Blur Separable kernel</div></div>
    <div class="image">
<img src="gaussian_blur_separable.png" alt=""/>
<div class="caption">
Gaussian Blur Separable kernel total</div></div>
    <p><b>Comparing 2D Kernel vs Separable Kernel -</b></p>
<div class="image">
<img src="gaussian_blur_separable_vs_2d.png" alt=""/>
<div class="caption">
Gaussian Blur GPU Comparison</div></div>
    <p>Average Speedup : 25.72 times</p>
<p><b>Comparing CPU vs GPU implementations -</b></p>
<div class="image">
<img src="gaussian_blur_single_threaded_vs_multi_threaded_vs_2d_vs_separable.png" alt=""/>
<div class="caption">
Gaussian Blur CPU vs GPU comparison</div></div>
    <div class="image">
<img src="gaussian_blur_multi_threaded_vs_2d_vs_separable.png" alt=""/>
<div class="caption">
Gaussian Blur CPU vs GPU</div></div>
    <p>Average Speedup : 2461.73 times</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Inference</h1>
<p>Gaussian Blurring is a popular technique used in image processing to remove noise and smooth an image. In this project, the technique is implemented using both CPU and GPU computing.</p>
<p>The CPU implementation first applies a 2D blur to the image, which is a computationally intensive task that involves convolving the image with a Gaussian kernel. This is done using a nested loop structure that applies the kernel to each pixel in the image.</p>
<p>To improve the performance of the CPU implementation, a multithreaded version using OpenMP is also implemented. This allows the kernel to be applied to multiple pixels simultaneously, reducing the total time taken to blur the image.</p>
<p>The GPU implementation uses CUDA to accelerate the Gaussian blurring process. The image is transferred to the GPU, and the kernel is applied to each pixel in parallel using a grid of threads. This greatly reduces the time taken to blur the image compared to the CPU implementation.</p>
<p>Finally, a separable kernel is used to further improve the performance of the GPU implementation. This involves breaking the Gaussian kernel into two 1D kernels, which can be applied separately in the x and y directions. This greatly reduces the number of computations required to apply the kernel, resulting in very high speedups.</p>
<p>In summary, Gaussian Blurring using CPU and GPU is a computationally intensive task that can benefit greatly from parallel processing. By implementing a multithreaded version using OpenMP and a GPU version using CUDA, the performance of the algorithm can be greatly improved. Using a separable kernel further improves the performance of the GPU implementation, resulting in very high speedups. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
